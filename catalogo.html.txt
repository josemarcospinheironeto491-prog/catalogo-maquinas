<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Máquinas Point — Automatizado</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #27ae60;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f5f5f5; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { background-color: var(--primary); color: white; padding: 20px 0; text-align: center; margin-bottom: 30px; border-radius: 0 0 8px 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .benefits-section, .payment-section { background-color: white; padding: 20px; border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .benefit-cards, .payment-grid { display:flex; flex-wrap:wrap; gap:15px; margin-top:15px; }
        .benefit-card, .payment-card { flex:1 1 300px; background-color:var(--light); padding:15px; border-radius:6px; border-left:4px solid var(--secondary); }
        .products-section { display:grid; grid-template-columns: repeat(auto-fit, minmax(300px,1fr)); gap:25px; margin-bottom:30px; }
        .product-card { background-color:white; border-radius:8px; overflow:hidden; box-shadow:0 4px 6px rgba(0,0,0,0.1); transition:transform 0.3s ease; }
        .product-card:hover { transform: translateY(-5px); }
        .product-image { height:200px; overflow:hidden; background-color:#f8f9fa; }
        .product-image img { width:100%; height:100%; object-fit:contain; padding:20px; }
        .product-info { padding:20px; }
        .product-title { font-size:1.3rem; color:var(--primary); margin-bottom:10px; }
        .product-price { font-size:1.8rem; font-weight:bold; color:var(--secondary); margin-bottom:15px; }
        .product-stock { display:inline-block; padding:5px 10px; background-color:var(--success); color:white; border-radius:4px; font-size:0.8rem; margin-bottom:15px; }
        .product-description { margin-bottom:15px; color:#666; }
        .product-button { display:inline-block; padding:10px 20px; background-color:var(--primary); color:white; border:none; border-radius:4px; cursor:pointer; text-decoration:none; transition:background-color 0.3s; }
        .product-button:hover { background-color:var(--dark); }
        footer { background-color:var(--dark); color:white; text-align:center; padding:20px; border-radius:8px 8px 0 0; }

        /* Modal / Checkout */
        .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.5); padding-top:40px; }
        .modal-content { background-color:#fff; margin:5% auto; padding:20px; border-radius:8px; width:90%; max-width:700px; position:relative; }
        .close { color:#aaa; float:right; font-size:28px; font-weight:bold; cursor:pointer; }
        .close:hover { color:black; }
        label { display:block; margin:10px 0 6px; font-weight:600; }
        input[type=text], input[type=email], input[type=tel], textarea, select { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; }
        input[type=file] { margin-top:8px; }
        .btn { display:inline-block; padding:10px 16px; border-radius:6px; border:none; cursor:pointer; }
        .btn-primary { background:var(--primary); color:#fff; }
        .btn-secondary { background:var(--secondary); color:#fff; }
        .small { font-size:0.9rem; color:#555; margin-top:8px; }
        .success { background: #e9fbe7; border-left: 4px solid var(--success); padding:10px; border-radius:6px; margin-top:10px; }

        @media (max-width:600px) { .product-image { height:160px; } }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Catálogo de Máquinas Point</h1>
            <p>Tecnologia avançada para suas vendas — Checkout automatizado</p>
        </div>
    </header>

    <div class="container">
        <section class="benefits-section">
            <h2>Vantagens das Máquinas Point</h2>
            <div class="benefit-cards">
                <div class="benefit-card">
                    <h3>Chip incluso</h3>
                    <p>Todas as máquinas já vêm com chip (escolha entre Vivo, Tim e Claro)</p>
                </div>
                <div class="benefit-card">
                    <h3>Entrega rápida</h3>
                    <p>Entrega em até 18 dias (entrega grátis no seu endereço)</p>
                </div>
            </div>
        </section>

        <section class="payment-section">
            <h2>Condições de Pagamento</h2>
            <div class="payment-grid">
                <div class="payment-card">
                    <h3>Débito</h3>
                    <p><strong>1,99%</strong> por venda (disponível na hora)</p>
                </div>
                <div class="payment-card">
                    <h3>Crédito à vista</h3>
                    <p><strong>4,74%</strong> (disponível na hora)</p>
                    <p><strong>3,79%</strong> (disponível em 14 dias)</p>
                    <p><strong>3,03%</strong> (disponível em 30 dias)</p>
                </div>
                <div class="payment-card">
                    <h3>Parcelado</h3>
                    <p>Taxas de acordo com o número de parcelas</p>
                </div>
            </div>
        </section>

        <section class="products-section" id="products">
            <!-- Product cards rendered by JS -->
        </section>
    </div>

    <footer>
        <div class="container">
            <p>© 2023 Catálogo Point. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close" id="checkoutClose">&times;</span>
            <h3 id="checkoutTitle">Finalizar Compra</h3>

            <div id="paymentOptions">
                <p class="small">Escolha a forma de pagamento. Após efetuar o pagamento, clique em "Já efetuei o pagamento" e preencha o formulário de envio do comprovante. <strong>Observação:</strong> após realizar o pagamento, envie o comprovante juntamente com nome completo, telefone e endereço (inclua ponto de referência) para que possamos realizar a entrega.</p>
                <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
                    <a id="cardLink" class="btn btn-secondary" target="_blank" rel="noopener">Pagar com Cartão</a>
                    <button class="btn btn-primary" id="pixBtn">Pagar com PIX</button>
                    <button class="btn" id="alreadyPaidBtn">Já efetuei o pagamento</button>
                </div>
                <div id="pixInfo" class="small" style="margin-top:10px; display:none;">Chave PIX: <strong id="pixKey">45fbfa4e-385c-4b36-b74c-b39934efc91e</strong></div>
            </div>

            <form id="proofForm" style="display:none; margin-top:12px;" enctype="multipart/form-data">
                <h4>Enviar comprovante e dados para entrega</h4>
                <label for="fullname">Nome completo *</label>
                <input type="text" id="fullname" name="fullname" required />

                <label for="phone">Telefone / WhatsApp *</label>
                <input type="tel" id="phone" name="phone" required />

                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" />

                <label for="address">Endereço completo (rua, número, bairro, cidade, CEP) *</label>
                <input type="text" id="address" name="address" required />

                <label for="reference">Ponto de referência *</label>
                <input type="text" id="reference" name="reference" required placeholder="Ex: em frente ao supermercado X" />

                <label for="product">Produto</label>
                <input type="text" id="product" name="product" readonly />

                <label for="amount">Valor</label>
                <input type="text" id="amount" name="amount" readonly />

                <label for="receipt">Comprovante de pagamento (imagem ou PDF) *</label>
                <input type="file" id="receipt" name="receipt" accept="image/*,.pdf" required />

                <div style="margin-top:12px; display:flex; gap:10px;">
                    <button type="submit" class="btn btn-primary">Enviar comprovante</button>
                    <button type="button" class="btn" id="cancelProof">Cancelar</button>
                </div>
                <div id="formMessage" style="margin-top:10px;"></div>
            </form>

        </div>
    </div>

    <script>
        // Produtos — você pode adaptar preços, estoques e links
        const products = [
            { id: 'smart2', title: 'Point Smart 2', price: 698.00, stock: 2, img: 'https://i.ibb.co/1G5cfqm0/Whats-App-Image-2025-08-08-at-10-15-28-2.jpg', cardLink: 'https://mpago.la/29m9KQx' },
            { id: 'pro3', title: 'Point Pro 3', price: 350.00, stock: 2, img: 'https://i.ibb.co/mC9KXYHc/Whats-App-Image-2025-08-08-at-10-15-28-1.jpg', cardLink: 'https://mpago.la/1FcFsTt' },
            { id: 'kit', title: 'Kit Smart 2 + Pro 3', price: 525.00, stock: 1, img: 'https://i.ibb.co/gLyQd43j/Imagem-do-Whats-App-2025-08-08-às-15-10-28.jpg', cardLink: 'https://mpago.la/1mGxjtY' }
        ];

        const productsSection = document.getElementById('products');
        function renderProducts(){
            productsSection.innerHTML = '';
            products.forEach(p => {
                const art = document.createElement('article'); art.className='product-card';
                art.innerHTML = `
                    <div class="product-image"><img src="${p.img}" alt="${p.title}"/></div>
                    <div class="product-info">
                        <h3 class="product-title">${p.title}</h3>
                        <div class="product-price">R$ ${p.price.toFixed(2).replace('.',',')}</div>
                        <span class="product-stock">${p.stock} unidades disponíveis</span>
                        <p class="product-description">Máquina de cartão com tecnologia avançada para aceitar todos os tipos de pagamento.</p>
                        <button class="product-button" data-id="${p.id}">Comprar</button>
                    </div>
                `;
                productsSection.appendChild(art);
            });
        }
        renderProducts();

        // Modal and flow
        const modal = document.getElementById('checkoutModal');
        const closeBtn = document.getElementById('checkoutClose');
        const cardLink = document.getElementById('cardLink');
        const pixBtn = document.getElementById('pixBtn');
        const pixInfo = document.getElementById('pixInfo');
        const pixKey = document.getElementById('pixKey');
        const alreadyPaidBtn = document.getElementById('alreadyPaidBtn');
        const proofForm = document.getElementById('proofForm');
        const paymentOptions = document.getElementById('paymentOptions');
        const productInput = document.getElementById('product');
        const amountInput = document.getElementById('amount');
        const formMessage = document.getElementById('formMessage');

        let currentProduct = null;

        document.addEventListener('click', (e)=>{
            if(e.target.matches('.product-button')){
                const id = e.target.dataset.id;
                currentProduct = products.find(x => x.id===id);
                openCheckout(currentProduct);
            }
        });

        function openCheckout(product){
            document.getElementById('checkoutTitle').innerText = `Finalizar Compra — ${product.title}`;
            cardLink.href = product.cardLink;
            productInput.value = product.title;
            amountInput.value = `R$ ${product.price.toFixed(2).replace('.',',')}`;
            proofForm.style.display = 'none';
            paymentOptions.style.display = 'block';
            pixInfo.style.display = 'none';
            modal.style.display = 'block';
        }

        closeBtn.onclick = ()=> modal.style.display = 'none';
        window.onclick = (event)=> { if(event.target === modal) modal.style.display='none'; }

        // PIX toggle
        pixBtn.onclick = ()=> { pixInfo.style.display = pixInfo.style.display === 'none' ? 'block' : 'none'; };

        // "Já efetuei o pagamento" — mostra formulário para envio do comprovante
        alreadyPaidBtn.onclick = ()=>{
            paymentOptions.style.display = 'none';
            proofForm.style.display = 'block';
        };

        // Cancel proof
        document.getElementById('cancelProof').onclick = ()=>{
            proofForm.reset(); proofForm.style.display='none'; paymentOptions.style.display='block'; formMessage.innerHTML='';
        }

        // Handle proof form submission
        proofForm.addEventListener('submit', async (ev)=>{
            ev.preventDefault();
            formMessage.innerHTML = '';

            const fullname = document.getElementById('fullname').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const address = document.getElementById('address').value.trim();
            const reference = document.getElementById('reference').value.trim();
            const email = document.getElementById('email').value.trim();
            const receipt = document.getElementById('receipt').files[0];
            if(!fullname||!phone||!address||!reference||!receipt){ formMessage.innerHTML = '<div class="success">Por favor, preencha todos os campos obrigatórios e anexe o comprovante.</div>'; return; }

            // Prepare data
            const fd = new FormData();
            fd.append('fullname', fullname);
            fd.append('phone', phone);
            fd.append('email', email);
            fd.append('address', address);
            fd.append('reference', reference);
            fd.append('product', productInput.value);
            fd.append('amount', amountInput.value);
            fd.append('receipt', receipt);

            // === IMPORTANT ===
            // Replace the URL below with your FormSubmit endpoint, Formspree endpoint, or your server webhook.
            // Example FormSubmit AJAX: https://formsubmit.co/ajax/YOUREMAIL (replace YOUREMAIL with your email)
            // If you have a backend, replace with your webhook URL and handle multipart/form-data there.
            const endpoint = const endpoint = 'https://script.google.com/macros/s/AKfycbyw1fT13VlNTXWYuLd7GuAL8HwqeFmfCC3Bt2uU6KMXo4ZiCAH-OmYuFapSG12Ys4SpMg/exec'; // Substitua SEU_SCRIPT_ID pelo ID do seu script

            try{
                formMessage.innerHTML = 'Enviando...';
                const res = await fetch(endpoint, { method: 'POST', body: fd });
                if(res.ok){
                    proofForm.reset();
                    formMessage.innerHTML = '<div class="success">Comprovante enviado com sucesso! Em breve entraremos em contato para confirmar a entrega. Obrigado.</div>';
                    // You can optionally close modal after some seconds
                    // modal.style.display='none';
                } else {
                    const text = await res.text();
                    formMessage.innerHTML = `<div class="success">Erro ao enviar (status ${res.status}). Verifique o endpoint. Resposta: ${text}</div>`;
                }
            }catch(err){
                formMessage.innerHTML = `<div class="success">Falha na conexão. ${err.message}</div>`;
            }
        });

        // Quick setup: fill inputs with saved localStorage if present
        ['fullname','phone','email','address','reference'].forEach(k=>{
            const el = document.getElementById(k);
            if(!el) return;
            const saved = localStorage.getItem('order_'+k);
            if(saved) el.value = saved;
            el.addEventListener('input', ()=> localStorage.setItem('order_'+k, el.value));
        });

        // Accessibility: allow keyboard close
        document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') modal.style.display='none'; });

        // Notes for merchant (not visible to buyers):
        console.log('Observação: substitua \"YOUREMAIL\" em endpoint com seu e-mail do FormSubmit ou URL de webhook.');

        // Optional: prefill product/amount hidden fields on page load if link has ?product=smart2
        (function prefillFromQuery(){
            const params = new URLSearchParams(location.search);
            const pid = params.get('product');
            if(pid){ const p = products.find(x=>x.id===pid); if(p) openCheckout(p); }
        })();
    </script>
</body>
</html>
